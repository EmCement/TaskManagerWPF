<Window x:Class="TaskManagerWPF.Views.DashboardWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Панель управления - Менеджер задач"
        Height="700" Width="900"
        Background="#ecf0f1">

    <ScrollViewer>
        <StackPanel Margin="20">

            <TextBlock x:Name="WelcomeText"
                      Text="Панель управления" 
                      FontSize="28" 
                      FontWeight="Bold"
                      Foreground="#2c3e50"
                      Margin="0,0,0,20"/>

            <Border Background="White"
                    CornerRadius="8"
                    Padding="15"
                    Margin="0,0,0,20">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" 
                               HorizontalAlignment="Center">
                        <TextBlock x:Name="TotalProjectsText"
                                  Text="0"
                                  FontSize="36"
                                  FontWeight="Bold"
                                  Foreground="#3498db"
                                  HorizontalAlignment="Center"/>
                        <TextBlock Text="Всего проектов"
                                  Foreground="#7f8c8d"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" 
                               HorizontalAlignment="Center">
                        <TextBlock x:Name="ActiveTasksText"
                                  Text="0"
                                  FontSize="36"
                                  FontWeight="Bold"
                                  Foreground="#2ecc71"
                                  HorizontalAlignment="Center"/>
                        <TextBlock Text="Активные задачи"
                                  Foreground="#7f8c8d"/>
                    </StackPanel>

                    <StackPanel Grid.Column="2" 
                               HorizontalAlignment="Center">
                        <TextBlock x:Name="OverdueTasksText"
                                  Text="0"
                                  FontSize="36"
                                  FontWeight="Bold"
                                  Foreground="#e74c3c"
                                  HorizontalAlignment="Center"/>
                        <TextBlock Text="Просрочено"
                                  Foreground="#7f8c8d"/>
                    </StackPanel>

                    <StackPanel Grid.Column="3" 
                               HorizontalAlignment="Center">
                        <TextBlock x:Name="CompletedTasksText"
                                  Text="0"
                                  FontSize="36"
                                  FontWeight="Bold"
                                  Foreground="#9b59b6"
                                  HorizontalAlignment="Center"/>
                        <TextBlock Text="Завершено"
                                  Foreground="#7f8c8d"/>
                    </StackPanel>
                </Grid>
            </Border>

            <TextBlock Text="Быстрые действия" 
                      FontSize="20" 
                      FontWeight="SemiBold"
                      Foreground="#2c3e50"
                      Margin="0,0,0,10"/>

            <WrapPanel Margin="3,0,0,20">
                <Button Content="➕ Новый проект" 
                       Background="#3498db"
                       Foreground="White"
                       Width="130"
                       Height="40"
                       Margin="0,0,10,10"
                       Click="NewProject_Click"/>

                <Button Content="✅ Новая задача" 
                       Background="#2ecc71"
                       Foreground="White"
                       Width="130"
                       Height="40"
                       Margin="0,0,10,10"
                       Click="NewTask_Click"/>

                <Button Content="📋 Все задачи" 
                       Background="#f39c12"
                       Foreground="White"
                       Width="130"
                       Height="40"
                       Margin="0,0,10,10"
                       Click="AllTasks_Click"/>

                <Button Content="👤 Профиль" 
                       Background="#9b59b6"
                       Foreground="White"
                       Width="130"
                       Height="40"
                       Margin="0,0,10,10"
                       Click="Profile_Click"/>
                <Button Content="🔄 Обновить"
                        Background="#95a5a6"
                        Foreground="White"
                        Width="130"
                        Height="40"
                        Margin="0,0,10,10"
                        HorizontalAlignment="Right"
                        Click="RefreshButton_Click"/>
                <Button Content="🏗️ Все проекты" 
                        Background="#3498db"
                        Foreground="White"
                        Width="130"
                        Height="40"
                        Margin="0,0,10,10"
                        Click="AllProjects_Click"/>
            </WrapPanel>
            
            <Border Background="White"
                    CornerRadius="8"
                    Padding="15">
                <StackPanel>
                    <TextBlock Text="Недавние задачи" 
                              FontSize="18" 
                              FontWeight="SemiBold"
                              Foreground="#2c3e50"
                              Margin="0,0,0,15"/>

                    <ListView x:Name="RecentTasksList"
                             Height="200">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Border Padding="10" 
                                       BorderBrush="#ecf0f1" 
                                       BorderThickness="0,0,0,1">
                                    <StackPanel>
                                        <TextBlock Text="{Binding Title}" 
                                                  FontWeight="SemiBold"/>
                                        <TextBlock Text="{Binding ProjectName, FallbackValue='Проекта нет'}" 
                                                  Foreground="#7f8c8d"
                                                  FontSize="12"/>
                                        <TextBlock Text="{Binding DueDateDisplay}" FontSize="12">
                                            <TextBlock.Style>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="Foreground" Value="#34495e"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding IsOverdue}" Value="True">
                                                            <Setter Property="Foreground" Value="#e74c3c"/>
                                                            <Setter Property="FontWeight" Value="Bold"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>

                    <Button Content="Показать все задачи"
                           HorizontalAlignment="Right"
                           Margin="0,10,0,0"
                           Click="AllTasks_Click"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Window>